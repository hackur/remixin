/*!
 * Remixin
 * (c) SoundCloud 2015
 * Remixin may be freely distributed under the MIT license.
 */
!function(t){var e=t(require("underscore"));module.exports=e}(function(t){function e(){this.mixins=t.initial(arguments),this.properties=t.last(arguments)}function n(t,e){this.applyTo=function(n){t.applyTo(n,e)}}function r(e,n){return null==e?n.slice():(t.isArray(e)||(e=[e]),i(e,n))}function i(e,n){return Array.prototype.push.apply(e,t.difference(n,e)),e}function o(t,e){return null==t?e:r(t.split(/\s+/),e.split(/\s+/)).join(" ")}function u(e,n){return t.defaults(e||{},n)}var a=["before","after","around","requires","override","defaults","applyTo","requirePrototype","merge"];return t.extend(e.prototype,{mixins:null,properties:null,applyTo:function(e,n){var r=this.properties;this.defaults(e,r.defaults),this.extend(e,r),this.merge(e,r.merge),t.invoke(this.mixins,"applyTo",e),["requires","requirePrototype","override","before","after","around"].forEach(function(t){this[t](e,r[t])},this),r.applyTo&&r.applyTo.call(this,e,n)},withOptions:function(t){return new n(this,t)},before:function(e,n){t.each(n,function(t,n){var r=e[n];e[n]=function(){return t.apply(this,arguments),r.apply(this,arguments)}})},after:function(e,n){t.each(n,function(t,n){var r=e[n];e[n]=function(){var e=r.apply(this,arguments);return t.apply(this,arguments),e}})},around:function(e,n){t.each(n,function(t,n){var r=e[n];e[n]=function(){for(var e=0,n=arguments.length,i=Array(n+1);n>e;++e)i[e+1]=arguments[e];return i[0]=r.bind(this),t.apply(this,i)}})},override:function(e,n){t.extend(e,n)},defaults:function(e,n){t.defaults(e,n)},merge:function(e,n){t.each(n,function(n,i){if(null!=n){var a=e[i];e[i]=t.isArray(n)?r(a,n):t.isString(n)?o(a,n):u(a,n)}})},extend:function(e,n){var r=t.omit(n,a);t.extend(e,r)},requires:t.noop,requirePrototype:t.noop}),n.prototype=e.prototype,e});